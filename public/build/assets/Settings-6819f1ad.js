import{n as g,E as h}from"./app-620eae05.js";const _={mixins:[h],data(){return{activeTab:userInfo.role<50?"application":"settings",settings:[],companySettings:[],applicationSettings:localStorage.getItem("settings.application")?JSON.parse(localStorage.getItem("settings.application")):{labelPrinter:"ZDesigner GK420d",deliveryNotePrinter:""},types:{1:{name:"Records Per Page",enabled:!0,type:"number"},2:{name:"Delivery Options",enabled:!0,type:"text"},3:{name:"Dispenser Limit",enabled:!0,type:"number"},5:{name:"PXP Status (LIVE or OFF)",enabled:!1,type:"switch"},900:{name:"Hidden",enabled:!1,type:"text"}},hiddenFields:["ClientID"],userInfo,location:window.location.origin,errors:{},update:{},companySettingsUpdate:{},file:"",status:"",importing:!1,printAppOnline:!1}},computed:{globalSettings(){return this.settings.filter(s=>s.Type!=2)},deliveryOptions(){return this.settings.filter(s=>s.Type==2)},inputText(){return this.file!=""?this.file.name:"Upload XML"},buttonText(){return this.file!=""?"Importing":"Upload"}},mounted(){this.getSettings(),this.getCompanySettings(),this.getPrinterList()},methods:{getSettings(){axios.get("/settings").then(s=>{this.settings=s.data.data,this.settings.forEach(t=>{this.update[t.SettingID]=t.Value})}).catch(s=>{this.postError(s.data.data)})},getCompanySettings(){axios.get("/settings/company").then(s=>{this.companySettings=s.data.data,this.companySettingsUpdate=JSON.parse(JSON.stringify(this.companySettings))}).catch(s=>{this.postError(s.data.data)})},getPrinterList(){axios.get("http://localhost:63020").then(s=>{this.printAppOnline=s.data}).catch(s=>{this.printAppOnline=!1})},updateApplicationSettings(){this.$swal({title:"Are you sure you want to update local application settings?",text:"Make sure the values you are changing are correct!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update local application settings!"}).then(s=>{s.value&&(localStorage.setItem("settings.application",JSON.stringify(this.applicationSettings)),this.postSuccess("Application settings updated!"))})},updateGlobalSettings(){this.$swal({title:"Are you sure you want to update global application settings?",text:"Make sure the values you are changing are correct!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update global application settings!"}).then(s=>{s.value&&axios.patch("/settings",this.update).then(t=>{this.postSuccess("Global settings updated!")}).catch(t=>{this.postError(t.data.data)})})},updateCompanySettings(){this.$swal({title:"Are you sure you want to update company settings?",text:"Make sure the values you are changing are correct!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update company settings!"}).then(s=>{s.value&&axios.patch("/settings/company",this.companySettingsUpdate).then(t=>{this.postSuccess("Company settings updated!")}).catch(t=>{this.postError(t.data.data)})})},inputClick(){document.getElementById("file").click()},attachFile(){let s=document.getElementById("file").files;s.length&&(this.file=s[0])},upload(){this.importing=!0;let s=new FormData;s.append("file",this.file),s.append("option",this.option),axios.post("/import/xml",s,{headers:{"Content-type":"multipart/form-data"}}).then(t=>{this.status=t.data.message,this.postSuccess("XML imported successfully"),document.getElementById("file").value=""}).catch(t=>{this.postError(t.response.data.message),document.getElementById("file").value=""}).finally(()=>{this.file="",this.importing=!1})}}};var y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("section",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"settings"},[e("ul",{staticClass:"tabs"},[t.userInfo.role>=50?e("li",{class:{active:t.activeTab=="settings"},staticStyle:{"margin-left":"0 !important"},attrs:{title:"Global settings applied across the application."},on:{click:function(a){t.activeTab="settings"}}},[e("a",{staticClass:"danger",attrs:{href:"javascript:;"}},[t._v("Global Settings")])]):t._e(),t.userInfo.role>=50?e("li",{class:{active:t.activeTab=="delivery"},attrs:{title:"Delivery settings applied across all orders"},on:{click:function(a){t.activeTab="delivery"}}},[e("a",{attrs:{href:"javascript:;"}},[t._v("Delivery Settings ")])]):t._e(),t.userInfo.role>=50?e("li",{class:{active:t.activeTab=="details"},attrs:{title:"THIS IS THE MAIN COMPANY DETAIL. IF YOU MAKE CHANGES HERE IT WILL AFFECT THE SYSTEM I.E. DELIVERY NOTE"},on:{click:function(a){t.activeTab="details"}}},[e("a",{attrs:{href:"javascript:;"}},[t._v("Company Details ")])]):t._e(),t.userInfo.role>=50?e("li",{class:{active:t.activeTab=="import"},attrs:{title:"Manual XML Import"},on:{click:function(a){t.activeTab="import"}}},[e("a",{attrs:{href:"javascript:;"}},[t._v("Manual XML Import")])]):t._e(),e("li",{class:{active:t.activeTab=="application"},attrs:{title:"Local Application Settings"},on:{click:function(a){t.activeTab="application"}}},[e("a",{attrs:{href:"javascript:;"}},[t._v("Local Settings")])]),e("li",{class:{active:t.activeTab=="downloads"},attrs:{title:"Local Application Settings"},on:{click:function(a){t.activeTab="downloads"}}},[e("a",{attrs:{href:"javascript:;"}},[t._v("Documents")])]),t.userInfo.role>=50?e("li",{class:{active:t.activeTab=="devsites"},attrs:{title:"Dev Sites"},on:{click:function(a){t.activeTab="devsites"}}},[e("a",{attrs:{href:"javascript:;"}},[t._v("Dev Sites")])]):t._e()]),t.activeTab=="settings"?e("div",{staticClass:"content pxp-form"},[e("p",{staticClass:"mb-10"},[t._v(" These settings affect how many records are shown per page, how many orders a dispenser can assign to themselves, etc. ")]),t._m(1),e("hr",{staticClass:"mb-10"}),e("div",{staticClass:"form-column"},t._l(t.globalSettings,function(a){var i,n,r,u,l,o;return e("div",{key:a.SettingID,staticClass:"form-group form-group-2"},[e("label",{attrs:{for:a.SettingID}},[t._v(t._s(a.Name))]),((i=t.types[a.Type])==null?void 0:i.type)==="checkbox"?e("input",{directives:[{name:"model",rawName:"v-model",value:t.update[a.SettingID],expression:"update[setting.SettingID]"}],staticClass:"form-control mb-3",attrs:{disabled:!((n=t.types[a.Type])!=null&&n.enabled),name:a.SettingID,placeholder:a.Name,type:"checkbox"},domProps:{checked:Array.isArray(t.update[a.SettingID])?t._i(t.update[a.SettingID],null)>-1:t.update[a.SettingID]},on:{change:function(c){var p=t.update[a.SettingID],m=c.target,f=!!m.checked;if(Array.isArray(p)){var v=null,d=t._i(p,v);m.checked?d<0&&t.$set(t.update,a.SettingID,p.concat([v])):d>-1&&t.$set(t.update,a.SettingID,p.slice(0,d).concat(p.slice(d+1)))}else t.$set(t.update,a.SettingID,f)}}}):((r=t.types[a.Type])==null?void 0:r.type)==="radio"?e("input",{directives:[{name:"model",rawName:"v-model",value:t.update[a.SettingID],expression:"update[setting.SettingID]"}],staticClass:"form-control mb-3",attrs:{disabled:!((u=t.types[a.Type])!=null&&u.enabled),name:a.SettingID,placeholder:a.Name,type:"radio"},domProps:{checked:t._q(t.update[a.SettingID],null)},on:{change:function(c){return t.$set(t.update,a.SettingID,null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.update[a.SettingID],expression:"update[setting.SettingID]"}],staticClass:"form-control mb-3",attrs:{disabled:!((l=t.types[a.Type])!=null&&l.enabled),name:a.SettingID,placeholder:a.Name,type:(o=t.types[a.Type])==null?void 0:o.type},domProps:{value:t.update[a.SettingID]},on:{input:function(c){c.target.composing||t.$set(t.update,a.SettingID,c.target.value)}}}),t.errors[a.Name]?e("div",{staticClass:"invalid-feedback d-block"},[t._v(" "+t._s(t.errors[a.Name][0])+" ")]):t._e()])}),0),e("div",{staticClass:"form-group form-group-2"},[e("button",{staticClass:"btn btnSize02 secondaryBtn",on:{click:function(a){return t.updateGlobalSettings()}}},[t._v(" Update ")])])]):t._e(),t.activeTab=="delivery"?e("div",{staticClass:"content pxp-form"},[e("p",{staticClass:"mb-10"},[t._v(" These settings affect the API connection with various delivery companies ")]),t._m(2),e("hr",{staticClass:"mb-10"}),t._l(t.deliveryOptions,function(a){return e("div",{key:a.SettingID,staticClass:"form-group form-group-2"},[e("label",{attrs:{for:a.SettingID}},[t._v(t._s(a.Name))]),t.types[a.Type].type==="checkbox"?e("input",{directives:[{name:"model",rawName:"v-model",value:t.update[a.SettingID],expression:"update[setting.SettingID]"}],staticClass:"form-control mb-3",attrs:{name:a.SettingID,placeholder:a.Name,type:"checkbox"},domProps:{checked:Array.isArray(t.update[a.SettingID])?t._i(t.update[a.SettingID],null)>-1:t.update[a.SettingID]},on:{change:function(i){var n=t.update[a.SettingID],r=i.target,u=!!r.checked;if(Array.isArray(n)){var l=null,o=t._i(n,l);r.checked?o<0&&t.$set(t.update,a.SettingID,n.concat([l])):o>-1&&t.$set(t.update,a.SettingID,n.slice(0,o).concat(n.slice(o+1)))}else t.$set(t.update,a.SettingID,u)}}}):t.types[a.Type].type==="radio"?e("input",{directives:[{name:"model",rawName:"v-model",value:t.update[a.SettingID],expression:"update[setting.SettingID]"}],staticClass:"form-control mb-3",attrs:{name:a.SettingID,placeholder:a.Name,type:"radio"},domProps:{checked:t._q(t.update[a.SettingID],null)},on:{change:function(i){return t.$set(t.update,a.SettingID,null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.update[a.SettingID],expression:"update[setting.SettingID]"}],staticClass:"form-control mb-3",attrs:{name:a.SettingID,placeholder:a.Name,type:t.types[a.Type].type},domProps:{value:t.update[a.SettingID]},on:{input:function(i){i.target.composing||t.$set(t.update,a.SettingID,i.target.value)}}}),t.errors[a.Name]?e("div",{staticClass:"invalid-feedback d-block"},[t._v(" "+t._s(t.errors[a.Name][0])+" ")]):t._e()])}),e("div",{staticClass:"form-group form-group-2"},[e("button",{staticClass:"btn btnSize02 secondaryBtn",on:{click:function(a){return t.updateGlobalSettings()}}},[t._v(" Update ")])])],2):t._e(),t.activeTab=="details"?e("div",{staticClass:"content pxp-form pxp-form-long"},[e("div",{staticClass:"infoBox warning mb-10"},[t._v(" THIS IS THE MAIN COMPANY DETAIL. IF YOU MAKE CHANGES HERE IT WILL AFFECT THE SYSTEM I.E. DELIVERY NOTE ")]),t._l(t.companySettingsUpdate,function(a,i){return t.hiddenFields.includes(i)?t._e():e("div",{key:i,staticClass:"form-group form-group-2",staticStyle:{width:"50%"}},[e("label",{attrs:{for:i}},[t._v(t._s(i))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.companySettingsUpdate[i],expression:"companySettingsUpdate[key]"}],staticClass:"form-control mb-3",attrs:{name:i,placeholder:i},domProps:{value:t.companySettingsUpdate[i]},on:{input:function(n){n.target.composing||t.$set(t.companySettingsUpdate,i,n.target.value)}}}),t.errors[i]?e("div",{staticClass:"invalid-feedback d-block"},[t._v(" "+t._s(t.errors[i][0])+" ")]):t._e()])}),e("div",{staticClass:"form-group form-group-2"},[e("button",{staticClass:"btn btnSize02 secondaryBtn",on:{click:function(a){return t.updateCompanySettings()}}},[t._v(" Update ")])])],2):t._e(),t.activeTab=="import"?e("div",{staticClass:"content"},[e("div",{staticClass:"infoBox warning"},[t._v(" PLEASE, DOUBLE CHECK THE XML DATA BEFORE IMPORTING! ")]),e("div",{staticClass:"input-container mt-20"},[e("input",{ref:"file",attrs:{type:"file",name:"tracking",id:"file",accept:".xml"},on:{change:t.attachFile}}),e("div",{staticClass:"input-mask",on:{click:t.inputClick}},[e("button",{staticClass:"browse-btn"},[t._v(" "+t._s(t.buttonText)+" ")]),e("span",{staticClass:"file-info"},[t._v(t._s(t.inputText))])])]),t.status!=""?e("section",{staticClass:"text-center infoBox success mt-10",domProps:{innerHTML:t._s(t.status)}}):t._e(),e("section",{staticClass:"text-center"},[e("button",{staticClass:"btn btnSize01 tertiaryBtn bigButton mt-10",attrs:{disabled:t.importing||t.file==""},on:{click:t.upload}},[t.importing?e("div",{staticClass:"loader"},[t._v("Loading...")]):e("span",[t._v("Import")])])])]):t._e(),t.activeTab=="application"?e("div",{staticClass:"content pxp-form"},[e("p",{staticClass:"mb-10"},[t._v(" Make sure the name of the printer is same as reported by system. If not the application will use the systems default printer. ")]),t._m(3),e("hr",{staticClass:"mb-10"}),e("div",{staticClass:"form-column"},[t.printAppOnline?e("div",{staticClass:"form-group form-group-2"},[e("label",{attrs:{for:"labelPrinter"}},[t._v("Label Printer")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.applicationSettings.labelPrinter,expression:"applicationSettings.labelPrinter"}],attrs:{name:"labelPrinter",id:"labelPrinter",placeholder:"Default system printer"},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(n){return n.selected}).map(function(n){var r="_value"in n?n._value:n.value;return r});t.$set(t.applicationSettings,"labelPrinter",a.target.multiple?i:i[0])}}},[e("option",{attrs:{value:""}},[t._v("Default")]),t._l(t.printAppOnline,function(a,i){return e("option",{key:i,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])})],2)]):e("div",{staticClass:"form-group form-group-2"},[e("label",{attrs:{for:"labelPrinter"}},[t._v("Label Printer")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.applicationSettings.labelPrinter,expression:"applicationSettings.labelPrinter"}],staticClass:"form-control mb-3",attrs:{type:"text",id:"labelPrinter",placeholder:"Default system printer"},domProps:{value:t.applicationSettings.labelPrinter},on:{input:function(a){a.target.composing||t.$set(t.applicationSettings,"labelPrinter",a.target.value)}}})]),t.printAppOnline?e("div",{staticClass:"form-group form-group-2"},[e("label",{attrs:{for:"labelPrinter"}},[t._v("Delivery Note Printer")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.applicationSettings.deliveryNotePrinter,expression:"applicationSettings.deliveryNotePrinter"}],attrs:{name:"deliveryNotePrinter",id:"deliveryNotePrinter",placeholder:"Default system printer"},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(n){return n.selected}).map(function(n){var r="_value"in n?n._value:n.value;return r});t.$set(t.applicationSettings,"deliveryNotePrinter",a.target.multiple?i:i[0])}}},[e("option",{attrs:{value:""}},[t._v("Default")]),t._l(t.printAppOnline,function(a,i){return e("option",{key:i,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])})],2)]):e("div",{staticClass:"form-group form-group-2"},[e("label",{attrs:{for:"deliveryNotePrinter"}},[t._v("Delivery Note Printer")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.applicationSettings.deliveryNotePrinter,expression:"applicationSettings.deliveryNotePrinter"}],staticClass:"form-control mb-3",attrs:{type:"text",id:"deliveryNotePrinter",placeholder:"Default system printer"},domProps:{value:t.applicationSettings.deliveryNotePrinter},on:{input:function(a){a.target.composing||t.$set(t.applicationSettings,"deliveryNotePrinter",a.target.value)}}})]),e("div",{staticClass:"form-group form-group-2"},[e("button",{staticClass:"btn btnSize02 secondaryBtn",on:{click:function(a){return t.updateApplicationSettings()}}},[t._v(" Update ")])]),t.userInfo.role>=50?e("hr",{staticClass:"mb-10"}):t._e(),t.userInfo.role>=50?e("div",{staticClass:"form-group form-group-2"},[t._m(4)]):t._e()])]):t._e(),t.activeTab=="downloads"?e("div",{staticClass:"content pxp-form"},[e("p",{staticClass:"mb-10"},[t._v(" Below you can download or view any pharmacy related document ")]),e("hr"),e("br"),t._m(5)]):t._e(),t.activeTab=="devsites"?e("div",{staticClass:"content pxp-form"},[e("p",{staticClass:"mb-10"},[t._v("Below is a list of all active dev sites")]),e("hr"),e("br"),t.location=="https://esasys.co.uk"||t.location=="https://pharmacist.4sm-dev.xyz"?e("ul",{staticClass:"list-group"},[t._m(6),t._m(7),t._m(8),t._m(9),t._m(10)]):e("ul",{staticClass:"list-group"},[t._m(11),t._m(12),t._m(13)])]):t._e()])])])])},b=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header"},[t("h3",[s._v("Settings")])])},function(){var s=this,t=s._self._c;return t("p",{staticClass:"mb-10"},[t("b",[s._v("These are global settings and affect all users!")])])},function(){var s=this,t=s._self._c;return t("p",{staticClass:"mb-10"},[t("b",[s._v("These are global settings and affect the entire application!")])])},function(){var s=this,t=s._self._c;return t("p",{staticClass:"mb-10"},[t("b",[s._v("These settings only affect the local PC, and any user using the local PC")])])},function(){var s=this,t=s._self._c;return t("a",{attrs:{href:"/download/printer"}},[t("button",{staticClass:"btn btnSize02 secondaryBtn"},[s._v(" Download printer application "),t("small",[s._v("(0.3.0)")])])])},function(){var s=this,t=s._self._c;return t("ul",{staticClass:"list-group"},[t("li",{staticClass:"list-group-item"},[t("p",[s._v(" Blank Pathology Form ("),t("a",{attrs:{target:"_blank",href:"/download/form"}},[s._v("download")]),s._v("/"),t("a",{attrs:{target:"_blank",href:"/view/form"}},[s._v("view")]),s._v(") ")])])])},function(){var s=this,t=s._self._c;return t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"https://old.esasys.co.uk"}},[s._v("old.esasys.co.uk - Old ESA")])])},function(){var s=this,t=s._self._c;return t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"https://dev.esasys.co.uk"}},[s._v("dev.esasys.co.uk - Old ESA Dev")])])},function(){var s=this,t=s._self._c;return t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"https://pharmacist.4sm-dev.xyz/"}},[s._v("pharmacist.4sm-dev.xyz - ESA Dev")])])},function(){var s=this,t=s._self._c;return t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"https://inventory.4sm-dev.xyz"}},[s._v("inventory.4sm-dev.xyz - Inventory Dev")])])},function(){var s=this,t=s._self._c;return t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"https://pxp.4sm-dev.xyz"}},[s._v("pxp.4sm-dev.xyz - PXP Dev")])])},function(){var s=this,t=s._self._c;return t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"https://dev.pharmasys.xyz"}},[s._v("dev.pharmasys.xyz - ESA Dev")])])},function(){var s=this,t=s._self._c;return t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"https://inventory.dev.pharmasys.xyz"}},[s._v("inventory.dev.pharmasys.xyz - Inventory Dev")])])},function(){var s=this,t=s._self._c;return t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"https://shipping.dev.pharmasys.xyz"}},[s._v("shipping.dev.pharmasys.xyz - Shipping Dev")])])}],S=g(_,y,b,!1,null,null,null,null);const I=S.exports;export{I as default};
